#!/usr/bin/env bash
args=("$@")
DOMAIN=${args[0]}
curl $DOMAIN -H 'Pragma: no-cache' -H 'Accept-Encoding: gzip, deflate, sdch' -H 'Accept-Language: en-US,en;q=0.8' -H 'Upgrade-Insecure-Requests: 1' -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36' -H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8' -H 'Cache-Control: no-cache' -H 'Cookie: _mkto_medium=direct; _mkto_source=N/A; _mkto_datetime=1473789740573; _msuuid_27490huz44870=63AA39AC-1E06-4511-AD01-3B3A53EA0A15; _mkto_medium=direct; _mkto_source=N/A; _mkto_datetime=1472587503995; SC_ANALYTICS_GLOBAL_COOKIE=78c444a652134b5b8763fee1f4fdb4f3|False; TS01b8569a=01460246b699c738589bdf0a4f24e53cde58738f6f659edaf9171748d8464038091745221d0961b71f42a661133673e67896f58837; website#lang=en-US; optimizelySegments=%7B%22357291612%22%3A%22gc%22%2C%22357371281%22%3A%22false%22%2C%22379330202%22%3A%22campaign%22%2C%22538112708%22%3A%22none%22%2C%22750352451%22%3A%22true%22%2C%22751025257%22%3A%22true%22%2C%22754380551%22%3A%22true%22%2C%222712820059%22%3A%22true%22%2C%222720670135%22%3A%22true%22%7D; optimizelyEndUserId=oeu1472239258131r0.7548708947202671; optimizelyBuckets=%7B%226439585632%22%3A%226445601291%22%2C%226777750992%22%3A%226783191037%22%7D; TS018a2893=01460246b69197499bf0b9ceb51bf64a48e8a24ff43fcddc233f8fd953a04218d692186af4; __atuvc=4%7C34%2C22%7C35%2C0%7C36%2C2%7C37; __atuvs=57d83f2c74ca026a000; sid=98969537870x3900530039003900550054004B00380050003600550057003000500058004200; csscxt=1473186314.20480.0000; TS01ddcca6=01460246b6ce09d43c916d98068d5ed8fc84cf1166991eb284cf14e8b81090d29fed89b6f1; TS01651014=01460246b67b11c3ee6f4a2e68e43d5a84d0ce4cd3127d84edbdb2fccc71be632d122dda625c5c91d95d2e7307fb777cbf8dbab5c5a56edc1064792daa0d5853def224004a100778d8f6b5e79d7371f87139ed7fa1; TS01e3fc32=01460246b6a6846be1f153d18e8fbe3e44aae7cea6afc3244397191fdda7a9278f8578587c8b5deddc653f576b410985239c5d928275989f598b4a5fad1e1d204036a2579cae5aed08af4e8cb19cc16494e869dbab45843a7627cb296a701113c2c0917d6e5907233e3457704ccc89a677efe290ba; utag_main=_st:1473791540475$ses_id:1473789813139%3Bexp-session; dtPC=-; WT_FPC=id=a17beb0b-7e76-40ea-a441-726a73c99ee9:lv=1473782540619:ss=1473782540619; __CT_Data=gpv=34&apv_53368_www=34; WRUID=0; dtLatC=129; TS015b2080=01460246b63690a9842bc521edd1392318d478560ad8d8c70e8d84159527d9c2bb3c6bff77500399a9876e36a9397453e99f6d90ed13f3e19ba5286f1ca6d50126ab7bc31bb2dd1b02209ae0d60f37fa726360aa5b; dtCookie=C57FF86F718CF644A562ABA95E7B079D|UGFydCtTZWFyY2h8MXxDbGFzc2ljK01pc2N8MXxfZGVmYXVsdHwx' -H 'Connection: keep-alive' --compressed > req1.html &&
sleep 5 &&
curl $DOMAIN -H 'Pragma: no-cache' -H 'Accept-Encoding: gzip, deflate, sdch' -H 'Accept-Language: en-US,en;q=0.8' -H 'Upgrade-Insecure-Requests: 1' -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36' -H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8' -H 'Cache-Control: no-cache' -H 'Cookie: _mkto_medium=direct; _mkto_source=N/A; _mkto_datetime=1473789740573; _msuuid_27490huz44870=63AA39AC-1E06-4511-AD01-3B3A53EA0A15; _mkto_medium=direct; _mkto_source=N/A; _mkto_datetime=1472587503995; SC_ANALYTICS_GLOBAL_COOKIE=78c444a652134b5b8763fee1f4fdb4f3|False; TS01b8569a=01460246b699c738589bdf0a4f24e53cde58738f6f659edaf9171748d8464038091745221d0961b71f42a661133673e67896f58837; website#lang=en-US; optimizelySegments=%7B%22357291612%22%3A%22gc%22%2C%22357371281%22%3A%22false%22%2C%22379330202%22%3A%22campaign%22%2C%22538112708%22%3A%22none%22%2C%22750352451%22%3A%22true%22%2C%22751025257%22%3A%22true%22%2C%22754380551%22%3A%22true%22%2C%222712820059%22%3A%22true%22%2C%222720670135%22%3A%22true%22%7D; optimizelyEndUserId=oeu1472239258131r0.7548708947202671; optimizelyBuckets=%7B%226439585632%22%3A%226445601291%22%2C%226777750992%22%3A%226783191037%22%7D; TS018a2893=01460246b69197499bf0b9ceb51bf64a48e8a24ff43fcddc233f8fd953a04218d692186af4; __atuvc=4%7C34%2C22%7C35%2C0%7C36%2C2%7C37; __atuvs=57d83f2c74ca026a000; sid=98969537870x3900530039003900550054004B00380050003600550057003000500058004200; csscxt=1473186314.20480.0000; TS01ddcca6=01460246b6ce09d43c916d98068d5ed8fc84cf1166991eb284cf14e8b81090d29fed89b6f1; TS01651014=01460246b67b11c3ee6f4a2e68e43d5a84d0ce4cd3127d84edbdb2fccc71be632d122dda625c5c91d95d2e7307fb777cbf8dbab5c5a56edc1064792daa0d5853def224004a100778d8f6b5e79d7371f87139ed7fa1; TS01e3fc32=01460246b6a6846be1f153d18e8fbe3e44aae7cea6afc3244397191fdda7a9278f8578587c8b5deddc653f576b410985239c5d928275989f598b4a5fad1e1d204036a2579cae5aed08af4e8cb19cc16494e869dbab45843a7627cb296a701113c2c0917d6e5907233e3457704ccc89a677efe290ba; utag_main=_st:1473791540475$ses_id:1473789813139%3Bexp-session; dtPC=-; WT_FPC=id=a17beb0b-7e76-40ea-a441-726a73c99ee9:lv=1473782540619:ss=1473782540619; __CT_Data=gpv=34&apv_53368_www=34; WRUID=0; dtLatC=129; TS015b2080=01460246b63690a9842bc521edd1392318d478560ad8d8c70e8d84159527d9c2bb3c6bff77500399a9876e36a9397453e99f6d90ed13f3e19ba5286f1ca6d50126ab7bc31bb2dd1b02209ae0d60f37fa726360aa5b; dtCookie=C57FF86F718CF644A562ABA95E7B079D|UGFydCtTZWFyY2h8MXxDbGFzc2ljK01pc2N8MXxfZGVmYXVsdHwx' -H 'Connection: keep-alive' --compressed > req2.html &&
diff req1.html req2.html > cacheable-diff.html